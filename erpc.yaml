logLevel: debug

server:
  httpPort: ${PORT:-4000}
  httpHostV4: "0.0.0.0"
  httpHostV6: "[::]"

metrics:
  enabled: true
  hostV4: "0.0.0.0"
  hostV6: "[::]"
  port: ${METRICS_PORT:-4001}

projects:
  - id: main
    cors:
      allowedOrigins: ["*"]
      allowedMethods: [GET, POST, OPTIONS]
      allowedHeaders: [Content-Type, Authorization]

    networks:
      - architecture: evm
        evm:
          chainId: 8453
        failsafe:
          # Per-attempt timeout; with 3 attempts worst-case ~ 3 × 8s
          timeout:
            duration: 8s
          retry:
            # Try each upstream at most once (we have 3 upstreams)
            maxAttempts: 3
            delay: 300ms
            backoffMaxDelay: 2s
            backoffFactor: 0.3
            jitter: 200ms
          hedge:
            # If first attempt is slow, start one parallel attempt
            delay: 800ms
            maxCount: 1

    upstreams:
      # Public Base upstreams (no keys). They can flap/rate-limit,
      # but with retry+hedge you’ll see eRPC rotate between them.
      - id: base-public-0
        endpoint: "https://api.zan.top/node/v1/base/mainnet/532eb96957bb4385bbad52a18d79592d"
        evm:
          chainId: 8453
          getLogsAutoSplittingRangeThreshold: 9900
          getLogsSplitOnError: true

      - id: base-public-1
        endpoint: "https://mainnet.base.org"
        evm:
          chainId: 8453
          getLogsAutoSplittingRangeThreshold: 9900
          getLogsSplitOnError: true

      - id: base-public-2
        endpoint: "https://base.blockpi.network/v1/rpc/public"
        evm:
          chainId: 8453
          getLogsAutoSplittingRangeThreshold: 9900
          getLogsSplitOnError: true

      - id: base-public-3
        endpoint: "https://1rpc.io/base"
        evm:
          chainId: 8453
          getLogsAutoSplittingRangeThreshold: 9900
          getLogsSplitOnError: true

      - id: base-public-4
        endpoint: "https://base.llamarpc.com"
        evm:
          chainId: 8453
          getLogsAutoSplittingRangeThreshold: 9900
          getLogsSplitOnError: true
