logLevel: warn

server:
  httpPort: ${PORT:-4000}
  httpHostV4: "0.0.0.0"
  httpHostV6: "[::]"

metrics:
  enabled: true
  hostV4: "0.0.0.0"
  hostV6: "[::]"
  port: ${METRICS_PORT:-4001}

projects:
  - id: main
    cors:
      allowedOrigins: ["*"]
      allowedMethods: [GET, POST, OPTIONS]
      allowedHeaders: [Content-Type, Authorization]

    networks:
      - architecture: evm
        evm:
          chainId: 8453
        failsafe:
          timeout:
            duration: 15s
          retry:
            maxAttempts: 2 # equal to number of upstreams
            delay: 300ms
            backoffMaxDelay: 2s
            backoffFactor: 0.3
            jitter: 200ms
          hedge:
            delay: 800ms
            maxCount: 1
    upstreams:
      # Public fallbacks (simulate the “default” pool)
      - id: base-public-1
        endpoint: "https://mainnet.base.org"
        evm:
          chainId: 8453
          getLogsAutoSplittingRangeThreshold: 9900
          getLogsSplitOnError: true

      - id: base-public-2
        endpoint: "https://base.blockpi.network/v1/rpc/public"
        evm:
          chainId: 8453
          getLogsAutoSplittingRangeThreshold: 9900
          getLogsSplitOnError: true

      - id: base-public-3
        endpoint: "https://1rpc.io/base"
        evm:
          chainId: 8453
          getLogsAutoSplittingRangeThreshold: 9900
          getLogsSplitOnError: true
